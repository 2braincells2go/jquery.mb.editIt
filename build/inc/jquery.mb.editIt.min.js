/*jquery.mb.editIt
 _ Copyright (c) 2015. Matteo Bicocchi (Pupunzi)
 */

function _(a,b){return $.editIt.i18n.setLabel(a,b)}!function(a,b){a.editIt={author:"Matteo Bicocchi (Pupunzi)",version:"1.1.1",build:"3981",defaults:{textareaName:null,pasteAs:"cleanHTML",blockImagesOnPaste:!0,enablePreview:!0,toolBar:"default",toolBarIcon:!0,enableSourceMode:!0,styleWithCSS:!1,spellcheck:!1,isAlwaysVisible:!0,lang:"it-IT"},init:function(c,d){return this.each(function(){var e=this,f=a(e);if(f.off(),e.opt={},e.cmnds={},e.editorsContainer=e,a.extend(e.opt,a.editIt.defaults,c),a.extend(e.cmnds,a.editIt.commands,d),a.editIt.i18n.lang=e.opt.lang,e.editItIdx||(e.editItIdx=e.id||"editIt_"+(new Date).getTime(),a.editIt.editors=a.editIt.editors||{},a.editIt.editors[e.editItIdx]={},a.editIt.editors[e.editItIdx].opt=e.opt),e.opt.isAlwaysVisible&&(e.toolbarPlaceholder=a("<div/>").addClass("editIt-toolbar-placeholder"),f.before(e.toolbarPlaceholder),a(window).on("scroll",function(){e.toolBar&&(clearTimeout(a.editIt.scrollAnimation),a.editIt.scrollAnimation=setTimeout(function(){var b=a(window).scrollTop();b>f.offset().top-e.toolbarPlaceholder.outerHeight()?(e.toolBar.stop(),e.toolBar.animate({top:b-f.offset().top+e.toolbarPlaceholder.outerHeight()},300)):e.toolBar.animate({top:0},300)},50))})),a.extend(e.opt,a.editIt.editors[e.editItIdx].opt),a.editIt.mainButtonBar.draw(e),"static"==f.css("position")&&f.css("position","relative"),e.opt.textareaName=f.data("textarea-name")||e.opt.textareaName,e.opt.textareaName){if(!a("textarea[name="+e.opt.textareaName+"]").length){var g=a("<textarea/>").attr({name:e.opt.textareaName,id:e.opt.textareaName}).hide();f.after(g)}e.textarea=a("#"+e.opt.textareaName),e.textarea.hide()}e.opt.enableSourceMode&&a.editIt.util.enableSourceMode.apply(e),e.opt.enablePreview&&a.editIt.util.enablePreview.apply(e),a(e).addClass("editIt-wrapper inEditMode"),"static"==f.css("position")&&f.css("position","relative");var h=f.is("[data-editable]")?a(this):a("[data-editable]",f);h.each(function(){var c=this,d=a(c);d.off(),"static"==d.css("position")&&d.css("position","relative"),c.buttonBar=a("<div/>").addClass("editIt-buttonBar"),d.prepend(c.buttonBar),d.parents().is("[data-editable]")||(d.data("enablesourcemode")&&a.editIt.util.enableSourceMode.apply(c),c.id||(c.id="editIt_"+(new Date).getTime()),c.editorsContainer=e.editorsContainer,d.addClass("editIt"),d.attr("contenteditable",!0),d.attr("spellcheck",e.opt.spellcheck),e.opt.styleWithCSS&&b.execCommand("styleWithCSS",!1,null),d.on("paste",function(b){a.editIt.util.handlePaste(b,c)}).on("mousedown",function(e){c.actualTag=e.target,a(b).one("mouseup",function(){a.editIt.util.getSelectedText().length&&d.trigger("mouseup")});var f=a.Event("editIt-mousedown");f.editor=c,d.trigger(f)}).on("mouseup keyup",function(b){"keyup"==b.type&&c.editorsContainer.opt.isAlwaysVisible||(b.stopPropagation(),clearTimeout(c.mouseupTimer),c.actualTag=b.target,a.editIt.actualEditor=c.editorsContainer,c.mouseupTimer=setTimeout(function(){c.editorsContainer.opt.isAlwaysVisible?(clearTimeout(a.editIt.hidetimer),a.editIt.toolBar.clear(c),a(".editIt-tooltip").remove(),!a(".editIt-dropdown").is(":visible")&&a.editIt.util.getSelectionCoords().left>0&&a.editIt.toolBar.draw(c)):0==a.editIt.util.getSelectedText().length?a.editIt.toolBar.clear(c):(clearTimeout(a.editIt.hidetimer),!a(".editIt-dropdown").is(":visible")&&a.editIt.util.getSelectionCoords().left>0&&a.editIt.toolBar.draw(c));var b="A"==c.actualTag.tagName.toUpperCase();if(b){var e=c.actualTag.href;0==a.editIt.util.getSelectedText().length&&a.editIt.tooltip.draw.apply(c.actualTag,[c,"<a href='"+e+"' target='_blank'>"+e+"</a>",!0])}var f=a.Event("editIt-mouseup");f.editor=c,d.trigger(f)},"mouseup"==b.type?50:500))}).on("focus",function(){c.editorsContainer.toolBar&&c.editorsContainer.toolBar.is(":visible")&&clearTimeout(a.editIt.hidetimer),a(".focusedEditor").removeClass("focusedEditor"),a(this).addClass("focusedEditor"),c.buttonBar&&c.buttonBar.fadeIn(100);var b=a.Event("editIt-focus");b.editor=c,d.trigger(b)}).on("blur",function(){a.editIt.hidetimer=setTimeout(function(){a.editIt.toolBar.clear(c),a(".focusedEditor").removeClass("focusedEditor"),setTimeout(function(){a(".editIt-tooltip").remove()},30);var b=a.Event("editIt-blur");b.editor=c,d.trigger(b)},150),c.buttonBar&&c.buttonBar.fadeOut(100)}).on("keydown",function(e){var f=e.keyCode;switch(f){case 8:a.editIt.toolBar.clear(c);break;case 13:var g=a.editIt.util.isSelectionInsideElement("OL")||a.editIt.util.isSelectionInsideElement("UL");if(g)return;e.preventDefault();var h=window.getSelection(),i=h.getRangeAt(0),j=b.createElement("br"),k=b.createTextNode("Â ");i.collapse(!1),i.insertNode(k),i.insertNode(j),i.selectNodeContents(k),h.removeAllRanges(),h.addRange(i),b.execCommand("forwardDelete",!1,null),e.shiftKey||b.execCommand("formatBlock",!1,"p");break;case 65:(e.ctrlKey||e.metaKey)&&setTimeout(function(){a.editIt.toolBar.draw(c)},50);break;case 66:(e.ctrlKey||e.metaKey)&&(b.execCommand("bold",!1,null),e.preventDefault());break;case 73:(e.ctrlKey||e.metaKey)&&(b.execCommand("italic",!1,null),e.preventDefault());break;case 85:(e.ctrlKey||e.metaKey)&&(b.execCommand("underline",!1,null),e.preventDefault());break;default:c.editorsContainer.opt.isAlwaysVisible||a.editIt.toolBar.clear(c)}var l=a.Event("editIt-keydown");l.editor=c,l.key=f,d.trigger(l)}).on("keyup",function(){e.editorsContainer.opt.textareaName&&a.editIt.util.updateTextarea(e);var b=a.Event("editIt-keyup");b.editor=c,b.key=k,d.trigger(b)}).on("mouseover",function(b){var e=b.target,f=a(e);if(f.parents(".focusedEditor").length){switch(e.tagName.toUpperCase()){case"IMG":break;case"TD":break;case"A":f.click()}c.hoverTag=e.tagName.toUpperCase();var g=a.Event("editIt-mouseover");g.editor=c,g.hoverElement=e,d.trigger(g)}}))});var i=a.Event("editIt-apply");i.editor=e,a(b).trigger(i),e.editorsContainer.opt.textareaName&&a.editIt.util.updateTextarea(e),b.execCommand("enableInlineTableEditing",!1,!1),b.execCommand("enableObjectResizing",!1,!1)})},toolBar:{none:"","default":["bold","italic","underline","strikeThrough","|","removeFormat","|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","paragraph","|","createlink","|","insertOrderedList","insertUnorderedList","|","outdent","indent","|","undo","redo"],small:["bold","italic","underline","strikeThrough","removeFormat","|","undo","redo"],draw:function(c,d){if(c.editorsContainer.opt.isAlwaysVisible||a(c).is("[contenteditable]")&&c.editorsContainer){a.extend(c.editorsContainer.cmnds,a.editIt.commands),a.extend(c.editorsContainer.opt.toolBar,a.editIt.defaults.toolBar),a.editIt.toolBar.clear(c);var e=a.editIt.toolBar.getElements(c);c.editorsContainer.toolBar=a("<div/>").addClass("editIt-toolbar").attr({id:"editIt-toolbar"});for(var f in e){if(e.hasOwnProperty(f))var g=e[f].trim();if("|"!=g){var h=c.editorsContainer.cmnds[g];if(h&&!(h.availableFor&&h.availableFor.indexOf(c.actualTag.tagName.toUpperCase())>0)){var i=c.editorsContainer.opt.toolBarIcon&&h.icon,j=i?"":h.label,k=a("<button>").html(_(j)).data("action",g).addClass((i?"icon ":"textual ")+g);i&&(k.addClass(h.icon),k.attr({title:_(h.label)})),h.type||(h.type="default");var l="undefined"!=typeof b.queryCommandState;switch(h.type){case"dropdown":var m=a("<span/>").addClass("editIt-icon-sort-desc").css({paddingLeft:10});k[0].isDropDown=!0,k.append(m);break;case"plugin":try{l&&b.queryCommandState(g)&&k.addClass("sel")}catch(n){console.debug(n)}break;default:try{l&&!b.queryCommandEnabled(g)&&k.addClass("disabled"),(l&&"createlink"==g&&a.editIt.util.isSelectionInsideElement("A")||"removeFormat"!=g&&b.queryCommandState(g))&&k.addClass("sel")}catch(n){console.debug(n)}}k.on("mousedown",function(b){b.stopPropagation();var d=this,e=a(d);clearTimeout(a.editIt.hidetimer),setTimeout(function(){a(c).focus();var b=[c];c.editorsContainer.cmnds[e.data("action")].action.apply(d,b),d.isDropDown||(a.editIt.toolBar.draw(c),c.editorsContainer.opt.textareaName&&a.editIt.util.updateTextarea(c))},50)}),c.editorsContainer.toolBar.append(k)}}else{var o=a("<span/>").addClass("separator").html("&nbsp;");c.editorsContainer.toolBar.append(o)}}d?c.editorsContainer.toolBar.fadeIn(200):c.editorsContainer.toolBar.show(),c.editorsContainer.toolBar.unselectable();var p=a(window).scrollLeft(),q=a(window).scrollTop();if(c.editorsContainer.opt.isAlwaysVisible)c.editorsContainer.toolbarPlaceholder.append(c.editorsContainer.toolBar),c.editorsContainer.toolBar.addClass("editIt-always-visible"),c.editorsContainer.toolbarPlaceholder.css({height:c.editorsContainer.toolBar.outerHeight()}),q>a(c.editorsContainer).offset().top-c.editorsContainer.toolbarPlaceholder.outerHeight()&&c.editorsContainer.toolBar.css({top:q-a(c.editorsContainer).offset().top+c.editorsContainer.toolbarPlaceholder.outerHeight()});else{var r=a.editIt.util.getSelectionCoords();a("body").after(c.editorsContainer.toolBar);var s=a("<div/>").addClass("arrow_box");c.editorsContainer.toolBar.append(s),r.left=r.left-c.editorsContainer.toolBar.outerWidth()/2,r.top=r.top-20;var t=r.left-p+c.editorsContainer.toolBar.width()<a(window).width(),u=r.top-q+c.editorsContainer.toolBar.height()<a(window).height();r.left=t?r.left:r.left-(r.left-p+c.editorsContainer.toolBar.width()-a(window).width())-10,r.left=r.left>10?r.left:10,r.top=u?r.top:r.top-(r.top-q+c.editorsContainer.toolBar.height()-a(window).height())-10,r.top=r.top<=q+c.editorsContainer.toolBar.height()?r.top+c.editorsContainer.toolBar.outerHeight()+20:r.top,c.editorsContainer.toolBar.css({left:r.left,top:r.top}),s.css({left:a.editIt.util.getSelectionCoords().left-r.left+r.width/2-5,top:r.top-c.editorsContainer.toolBar.position().top+c.editorsContainer.toolBar.outerHeight()-10})}a(".editIt-tooltip").remove()}},clear:function(a){a&&a.editorsContainer&&a.editorsContainer.toolBar&&a.editorsContainer.toolBar.is(":visible")&&(a.editorsContainer.toolBar.remove(),a.editorsContainer.toolbarPlaceholder.css({height:0}))},getElements:function(b){var c=a.editIt.toolBar[a(b).data("toolbar")||b.editorsContainer.opt.toolBar].slice(0),d=a.editIt.util.isSelectionInsideElement("A");return d&&c.indexOf("createlink")>0&&c.splice(c.indexOf("createlink")+1,0,"unlink"),c},add:function(b,c){a.editIt.toolBar[b]=c},extend:function(b,c,d){var e=a.editIt.toolBar[b];("|"==c||e.indexOf(c)<0)&&e.splice(d,0,c)}},commands:{extend:function(b,c){if("object"==typeof b)for(var d in b)b.hasOwnProperty(d)&&(a.editIt.commands[d]=b[d]);else a.editIt.commands[b]=c},redo:{label:"Redo",icon:"editIt-icon-mail-forward",action:function(){b.queryCommandEnabled("redo")&&b.execCommand("redo",!1,null)}},undo:{label:"Undo",icon:"editIt-icon-mail-reply",action:function(){b.queryCommandEnabled("undo")&&b.execCommand("undo",!1,null)}},bold:{label:"Bold",icon:"editIt-icon-bold",action:function(a){b.execCommand("bold",!1,null)}},italic:{label:"Italic",icon:"editIt-icon-italic",action:function(){b.execCommand("italic",!1,null)}},underline:{label:"Underline",icon:"editIt-icon-underline",action:function(){b.execCommand("underline",!1,null)}},strikeThrough:{label:"Stroke",icon:"editIt-icon-strikethrough",action:function(){b.execCommand("strikeThrough",!1,null)}},removeFormat:{label:"Clear",icon:"editIt-icon-eraser",action:function(){b.execCommand("removeFormat",!1,null)}},createlink:{label:"Link",icon:"editIt-icon-chain",action:function(c){var d=b.getSelection().toString(),e=self.location.href;d.length>30&&(d=d.substring(0,28)+"...");var f="A"==c.actualTag.tagName.toUpperCase()?c.actualTag.href.replace(b.URL,"").replace(b.location.origin,""):"",g="A"==c.actualTag.tagName.toUpperCase()?c.actualTag.title:"",h="A"==c.actualTag.tagName.toUpperCase()&&c.actualTag.target?"checked":"";promptContent="<h2>"+_("Write here the URL for:")+" <span style='opacity:.6'>"+d+"</span></h2> \n<input type='text' data-required='true' id='editItlink' name='link' placeholder='http://' value='"+f+"'><br><br><input type='text' id='editItlinkTitle' name='title' placeholder='"+_("Add a title")+"' value='"+g+"'><br><br><input type='checkbox' id='editItlinkTarget' name='target' value='_blank' "+h+"> <label for='editItlinkTarget'>"+_("Open the link in a new window")+"</label>",a.editIt.prompt.draw(c,promptContent,null,function(a){if(a.link&&"http://"!=a.link){var c=a.link.replace(e,"");b.execCommand("createlink",!1,c),a.target&&(b.getSelection().anchorNode.parentNode.target=a.target),a.title&&(b.getSelection().anchorNode.parentNode.title=a.title)}else b.execCommand("unlink",!1,"")},null,null,!0)}},justifyFull:{label:"Justify",icon:"editIt-icon-align-justify",action:function(){b.execCommand("justifyFull",!1,"")}},justifyCenter:{label:"Center",icon:"editIt-icon-align-center",action:function(){b.execCommand("justifyCenter",!1,"")}},justifyLeft:{label:"Left",icon:"editIt-icon-align-left",action:function(){b.execCommand("justifyLeft",!1,"")}},justifyRight:{label:"Right",icon:"editIt-icon-align-right",action:function(){b.execCommand("justifyRight",!1,"")}},unlink:{label:"Unlink",icon:"editIt-icon-chain-broken",action:function(){b.execCommand("unlink",!1,"")}},paragraph:{label:"Paragraph",icon:"editIt-icon-paragraph",type:"dropdown",action:function(b){var c=["h1","h2","h3","h4","h5","h6","-","p","blockquote"];a.editIt.dropDown.draw.apply(this,[b,c])}},h1:{label:"Title H1",icon:!1,action:function(){b.execCommand("formatBlock",!1,"<H1>")}},h2:{label:"Title H2",icon:!1,action:function(){b.execCommand("formatBlock",!1,"<H2>")}},h3:{label:"Title H3",icon:!1,action:function(){b.execCommand("formatBlock",!1,"<H3>")}},h4:{label:"Title H4",icon:!1,action:function(){b.execCommand("formatBlock",!1,"<H4>")}},h5:{label:"Title H5",icon:!1,action:function(){b.execCommand("formatBlock",!1,"<H5>")}},h6:{label:"Title H6",icon:!1,action:function(){b.execCommand("formatBlock",!1,"<H6>")}},p:{label:"Paragraph P",icon:"editIt-icon-paragraph",action:function(){b.execCommand("formatBlock",!1,"<P>")}},blockquote:{label:"Blockquote",icon:"editIt-icon-quote-left",action:function(){b.execCommand("formatBlock",!1,"<BLOCKQUOTE>")}},insertOrderedList:{label:"Ordered list",icon:"editIt-icon-list-ol",action:function(){b.execCommand("insertOrderedList",!1,null)}},insertUnorderedList:{label:"Unordered list",icon:"editIt-icon-list-ul",action:function(){b.execCommand("insertUnorderedList",!1,null)}},indent:{label:"Indent",icon:"editIt-icon-indent",action:function(){b.execCommand("indent",!1,null)}},outdent:{label:"Outdent",icon:"editIt-icon-dedent",action:function(){b.execCommand("outdent",!1,null)}}},plugins:{load:function(c,d){a(b).on("registered",function(b){b.plugin.UID=c.asId(),b.plugin.path=a.editIt.plugins.path+c+"/"}),jQuery.ajax({async:!1,type:"GET",url:a.editIt.plugins.path+c+"/plugin"+(d?".min":"")+".js?_="+(new Date).getTime(),data:null,dataType:"script",error:function(){a.editIt.alert.draw(null,_("There's been an error loading the plugin:<br> %%",[c]))}})},register:function(c){a.editIt._plugins=a.editIt.plugins||{},a.editIt._plugins[c.name]=c;var d=a.Event("registered");d.plugin=a.editIt._plugins[c.name],a(b).trigger(d),a.editIt.i18n.loadfile(c),a("<link/>",{rel:"stylesheet",href:c.path+"/style.css",id:"style_"+c.name}).appendTo("head"),a.editIt._plugins[c.name].activate.apply(c),a(b).on("editIt-apply",function(a){"function"==typeof c.update&&c.update.apply(c,[a])}),a(b).on("editIt-remove",function(){"function"==typeof c.destroy&&c.destroy.apply(c),a(b).off("."+c.name)})}},mainButtonBar:{draw:function(b){a(".editIt-main-buttonBar").remove(),b._buttonBar=b._buttonBar||{},b.mainButtonBar=a("<div/>").addClass("editIt-main-buttonBar"),a(b).append(b.mainButtonBar);var c=a.Event("editIt-create-mainBB");c.editor=b,a(b).trigger(c)},clear:function(){a(".editIt-main-buttonBar").remove()},addButton:function(b,c){var d={label:"button",icon:!1,className:null,action:function(){}};a.extend(d,c);var e=a.editIt.util.drawButton(d.label,"main-color "+d.className||"",d.icon,function(a){a.preventDefault(),d.action.apply(b,[b])});b.mainButtonBar.append(e),b._buttonBar[d.label]=e}},alert:{draw:function(c,d){c||(c=a.editIt.actualEditor),c.actualSelection=a.editIt.util.saveSelection(),a.editIt.toolBar.clear(c),c.alert=a("<div/>").addClass("editIt-alert").hide();var e=a("<div/>").addClass("editIt-alert-box"),f=a("<div/>").addClass("editIt-alert-buttonBar"),g=a.editIt.util.drawButton("Ok","apply","editIt-icon-check big",function(){c.alert.remove(),a("body").removeClass("blur"),setTimeout(function(){a.editIt.toolBar.draw(c),a(c).focus()},50),a(b).off("keydown.alert")});f.append(g),e.append(d),c.alert.append(e),e.append(f),a("body").after(c.alert),a("body").addClass("blur"),c.alert.fadeIn(120),a(b).on("keydown.alert",function(a){var b=a.keyCode;switch(b){case 13:a.preventDefault(),g.mouseup()}})}},prompt:{draw:function(c,d,e,f,g,h,i){var j=a(".editIt-toolbar").is(":visible");c.actualSelection=a.editIt.util.saveSelection(),a.editIt.toolBar.clear(c),c.prompt=a("<div/>").addClass("editIt-prompt").hide();var k=a("<div/>").addClass("editIt-prompt-box"),l=a.editIt.util.drawButton("Cancel","text-modality",null,null),m=a.editIt.util.drawButton(g||"Apply",(h||"apply")+" big",null,null),n=a("<div/>").addClass("editIt-prompt-buttonBar");n.append(l).append(m),k.append(d),m.on("click",function(){var d={};return a("input, textarea",c.prompt).each(function(){switch(this.type){case"checkbox":a(this).is(":checked")&&(d[this.name]=a(this).val());break;case"radio":a(this).is(":checked")&&(d[this.name]=a(this).val());break;default:this.value.length&&(d[this.name]=a(this).val())}return a(this).is("[data-required]")&&!this.value.length?(d="empty-required",a(this).addClass("required"),!1):void 0}),a.isEmptyObject(d)&&i?void a.editIt.prompt.highlight(c,_("Make your choice first...")):"empty-required"==d?(a.editIt.prompt.highlight(c,_("A required field is empty")),void a(".required",c.prompt).one("focus",function(){a(this).removeClass("required")})):(c.prompt.remove(),a("body").removeClass("blur"),setTimeout(function(){a.editIt.util.restoreSelection(c.actualSelection),a(c).focus(),j&&a.editIt.toolBar.draw(c),f(d)},50),void a(b).off("keydown.prompt"))}),l.on("click",function(){c.prompt.remove(),a("body").removeClass("blur"),a.editIt.util.restoreSelection(c.actualSelection),j&&a.editIt.toolBar.draw(c,!0),a(c).focus(),a(b).off("keydown.prompt")}),c.prompt.append(k),k.append(n),a("body").after(c.prompt),a("body").addClass("blur"),"function"==typeof a.editIt.prompt.onLoad&&(a.editIt.prompt.onLoad(c,e),a.editIt.prompt.onLoad=null),c.prompt.fadeIn(200,function(){k.find("input").eq(0).focus().select(),a(c).blur()}),a(b).on("keydown.prompt",function(a){var b=a.keyCode;switch(b){case 13:a.preventDefault(),m.click();break;case 27:a.preventDefault(),l.click()}})},highlight:function(b,c){b.prompt.addClass("highlight");var d=a("<div/>").addClass("editIt-prompt-message").html(c);a(".editIt-prompt-buttonBar").before(d),setTimeout(function(){b.prompt.removeClass("highlight"),d.remove()},3e3)},onLoad:function(a,b){}},tooltip:{draw:function(b,c,d){a(".editIt-tooltip").remove(),b.tooltip=a("<div/>").addClass("editIt-tooltip").hide(),b.tooltip.append(c),a("body").append(b.tooltip);var e=a.editIt.util.getSelectionCoords();d&&(e.left-=b.tooltip.outerWidth()/2),b.tooltip.css({left:e.left,top:e.top}),b.tooltip.slideDown(300)}},dropDown:{draw:function(b,c){var d=this,e=a(".editIt-dropdown");if(e.is(":visible")){var f=e[0].opener;if(e.remove(),f==d)return}clearTimeout(a.editIt.hidetimer),b.dropDown=a("<div/>").addClass("editIt-dropdown"),b.dropDown[0].opener=d,b.dropDown.css({position:"absolute",left:a(d).position().left,marginTop:0}),a(b).focus(),b.actualSelection=a.editIt.util.saveSelection();for(var g in c)if(c.hasOwnProperty(g)&&"-"==c[g]){var h=a("<div/>").addClass("row_separator");b.dropDown.append(h)}else{var i=b.editorsContainer.cmnds[c[g]];if(i&&(!i.availableFor||b.actualTag.tagName.toUpperCase()==i.availableFor)){var j=i.icon?"<span class='"+i.icon+"'></span>":"",k=a("<div/>").addClass("row"+c[g]).html(_(i.label)+" "+j).data("action",c[g]);b.dropDown.append(k);var l=a(b.dropDown[0].opener).parents(".editIt-toolbar").length;k.on("mousedown",function(){var c=a(this);b.actualSelection=a.editIt.util.saveSelection(),l?setTimeout(function(){a.editIt.util.restoreSelection(b.actualSelection);var d=[b];b.editorsContainer.cmnds[c.data("action")].action.apply(c[0],d),a(b).focus(),a.editIt.toolBar.draw(b),b.dropDown.remove()},50):setTimeout(function(){var a=[b];b.editorsContainer.cmnds[c.data("action")].action.apply(c[0],a),b.dropDown.remove()},50)})}}a(d).after(b.dropDown),a(document).one("blur, mousedown",b,function(c){a(c.target).is(b.dropDown[0].opener)||a(c.target).parents().is(b.dropDown)||b.dropDown.remove()})}},i18n:{loadfile:function(b){if(b.i18n)for(var c in b.i18n)a.editIt.i18n[c]=a.editIt.i18n[c]||{},a.extend(a.editIt.i18n[c],b[c]);else{var d=b?b.path:"";a.getJSON(d+"i18n.json?_=3981",function(b){for(var c in b)a.editIt.i18n[c]=a.editIt.i18n[c]||{},a.extend(a.editIt.i18n[c],b[c]);console.debug(d+"i18n.json file loaded")}).fail(function(a){console.debug("i18n for "+d+"i18n.json?_=3981 faild ",a)})}},setLabel:function(b,c){var d=a.editIt.i18n,e=d.lang||navigator.language||navigator.userLanguage,f=b;if(d[e]&&d[e][b]&&(f=d[e][b]),c)for(var g in c)f=f.replace("%%",c[g]);return f}},util:{getContent:function(b){a.editIt.util.setUneditable(b);var c=a(b).html(),d=a(b)[0].editorsContainer.opt;return a(a(b)[0].editorsContainer).editIt(d),c},getClearContent:function(b){if(b||b.editorsContainer){var c=a(b.editorsContainer).clone();return a("[id*=editIt_]",c).removeAttr("id"),a(".editIt-main-buttonBar",c).remove(),a("[data-editable]",c).removeClass("editIt").removeAttr("contenteditable"),a(".editIt-wrapper",c).removeClass("inEditMode"),a(".focusedEditor",c).removeClass("focusedEditor"),a(".editIt-buttonBar",c).remove(),c.html()}},updateTextarea:function(b){var c=a(b);c.length&&(b=c[0],b.editorsContainer&&b.editorsContainer.textarea&&b.editorsContainer.textarea.val(a.editIt.util.getClearContent(b)))},setUneditable:function(b){var c=a.Event("editIt-remove");c.editor=b,a(b).trigger(c),a.editIt.toolBar.clear(b),a("[id*=editIt_]").removeAttr("id"),a("[data-editable]",a(b)).removeClass("editIt").removeAttr("contenteditable").off(),a(".editIt-wrapper").removeClass("inEditMode"),a("[class*=-toolbar]").remove(),a("[class*=-buttonBar]").remove(),a.editIt.mainButtonBar.clear(),a.editIt.util.updateTextarea(b),a(b).blur()},handlePaste:function(c,d){function e(b){if(d.editorsContainer.opt.blockImagesOnPaste){var e=a("<div/>").html(b),f=e.find("img");f.length&&(a.editIt.alert.draw(d,_("<b>Attention!</b><br><br> Images insertion has been disabled in this editor.<br><br> <b>%%</b> images have been removed from the pasted source.",[f.length])),f.remove(),b=e.html(),e.remove())}return"text"==d.editorsContainer.opt.pasteAs||c.shiftKey?b=a(b).text():"cleanHTML"==d.editorsContainer.opt.pasteAs&&(b=a.htmlClean(b)),b}c=c.originalEvent||c;var f="";if(c&&c.clipboardData&&c.clipboardData.getData){if(!/text\/html/.test(c.clipboardData.types)){window.pasteTarget=a(c.target).parents(".editIt"),window.selection=window.getSelection(),window.range=selection.getRangeAt(0),a.fn.getPasteContent=function(){var c=this;return setTimeout(function(){var d,f,g,h;h=window.selection,g=window.range,originalHtml=c.html(),a(window.target).focus(),h.removeAllRanges(),h.addRange(g),g.deleteContents();for(var i=document.createDocumentFragment();f=c.firstChild;)d=i.appendChild(f);g.insertNode(i),d&&(g=g.cloneRange(),g.setStartAfter(d),g.collapse(!0),h.removeAllRanges(),h.addRange(g)),b.execCommand("insertHTML",!1,e(c.html())),c.remove()},1)};var g=a("<div/>").attr({id:"pasteTmp",contenteditable:!0}).css({position:"absolute",top:-3e3});return a("body").append(g),g.on("focus",function(){a(this).getPasteContent()}),void g.html("").focus()}f=c.clipboardData.getData("text/html")}d.editorsContainer.opt.pasteAs&&(c.stopPropagation(),c.preventDefault(),"none"!=d.editorsContainer.opt.pasteAs&&b.execCommand("insertHTML",!1,e(f)))},enablePreview:function(){var c=this;a.editIt.mainButtonBar.addButton(c,{label:_("Preview"),icon:"editIt-icon-eye",action:function(c){c.editorsContainer.previewMode=!0;var d=a("<div/>").addClass("editIt-preview").hide(),e=a("<div/>").html(a.editIt.util.getClearContent(c)).addClass("preview-content");d.append(e);var f=a.Event("editIt-preview");f.content=d,a(b).trigger(f);var g=a.editIt.util.drawButton("Close","previewMode-close main-color only-icon","editIt-icon-close",function(){d.slideUp(400,function(){a(this).remove(),a("body").removeClass("blur")});var b=c.editorsContainer.opt;a(c.editorsContainer).editIt(b)});d.append(g),a("body").after(d),a("body").addClass("blur"),d.slideDown(400,function(){a.editIt.util.setUneditable(c.editorsContainer)})}})},enableSourceMode:function(){var b=this,c=a(b),d=function(){a.editIt.util.setUneditable(b.editorsContainer),b.mainButtonBar&&b.mainButtonBar.remove(),c.addClass("inSourceMode"),a("body").addClass("sourceMode"),b.isInSourceMode=!0;var d=c.html();b.sourceMode&&b.sourceMode.remove(),b.editorsContainer.buttonBar&&b.editorsContainer.buttonBar.remove(),a("#HTML_"+b.id).remove();var e=a("<div/>").addClass("editIt-source-overlay").css({position:"fixed",top:0,left:0,bottom:0,right:0,margin:"auto"}),f=a("<div/>").addClass("editIt-source").attr({id:"HTML_"+b.id}),g=a("<textarea/>"),h=a.editIt.util.drawButton("Close","white align-right only-icon","editIt-icon-close",function(){b.isInSourceMode=!1;var d=b.editorsContainer.opt;a(b.editorsContainer).editIt(d),c.removeClass("inSourceMode"),a("body").removeClass("sourceMode"),f.removeClass("in"),e.delay(10).removeClass("in"),setTimeout(function(){f.remove(),e.remove()},1e3)});g.html(d),f.append(g),f.data("owner",b),a("body").append(e).append(f),f.prepend(h),setTimeout(function(){f.addClass("in"),e.addClass("in"),g.focus(),a.editIt.toolBar.clear(b)},100),g.on("change mouseup keyup",function(){var b=a(this).val();c.html(b)})};a(b.editorsContainer).is(b)?a.editIt.mainButtonBar.addButton(b,{label:_("Edit source"),icon:"editIt-icon-code",action:function(){d()}}):(b.sourceMode=a.editIt.util.drawButton("Edit source","align-right main-color only-icon","editIt-icon-code",d),b.buttonBar&&b.buttonBar.append(b.sourceMode))},drawButton:function(b,c,d,e,f,g){c=c?" "+c:"",d=d?" "+d:"";var h=a("<button/>").attr({label:g?"":_(b),title:g?_(b):""}).addClass("editIt-button"+c+d+(g?" only-icon":""));return e&&h.on("click",function(a){return e.apply(this,[a]),a.preventDefault(),!1}),f&&h.data(f.key,f.value),h},getSelectionCoords:function(){var c,d=b.selection,e=0,f=0,g=0;if(d)"Control"!=d.type&&(c=d.createRange(),c.collapse(!1),e=c.boundingLeft,f=c.boundingTop,g=c.right-c.left);else if(window.getSelection&&(d=window.getSelection(),d.rangeCount&&(c=d.getRangeAt(0),c.getClientRects&&c.getClientRects().length>0))){var h=c.getClientRects();e=h[0].left,f=h[0].top,g=1==h.length?h[0].width:h[1].width;var i=a(d.anchorNode.parentNode).outerWidth();g>i&&(g=i)}var j=a(window).scrollLeft(),k=a(window).scrollTop();return{left:e+j,top:f+k,width:g}},getSelectedText:function(){return window.getSelection?window.getSelection().toString():b.selection?b.selection.createRange().text:""},getSelectionHtml:function(){var a="";if("undefined"!=typeof window.getSelection){var b=window.getSelection();if(b.rangeCount){for(var c=document.createElement("div"),d=0,e=b.rangeCount;e>d;++d)c.appendChild(b.getRangeAt(d).cloneContents());a=c.innerHTML}}else"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(a=document.selection.createRange().htmlText);return a},getSelectedElement:function(){var a,b;for(a=window.getSelection(),a.focusNode&&(b=a.focusNode.children?a.focusNode.children[0]:a.focusNode.actualTag||a.focusNode.parentNode),a.rangeCount>0&&(b=a.getRangeAt(0).commonAncestorContainer);b;){if(1==b.nodeType)return b;b=b.parentNode}return!1},isSelectionInsideElement:function(a){var b,c;for(a=a.toUpperCase(),b=window.getSelection(),b.rangeCount>0&&(c=b.getRangeAt(0).commonAncestorContainer),b.focusNode&&(c=b.focusNode.children?b.focusNode.children[0]:b.focusNode.actualTag||b.focusNode.parentNode);c;){if(1==c.nodeType&&c.tagName.toUpperCase()==a)return c;c=c.parentNode}return!1},saveSelection:function(){if(window.getSelection){if(sel=window.getSelection(),sel.getRangeAt&&sel.rangeCount)return sel.getRangeAt(0)}else if(b.selection&&b.selection.createRange)return b.selection.createRange();return null},restoreSelection:function(a){a&&(window.getSelection?(sel=window.getSelection(),sel.removeAllRanges(),sel.addRange(a)):b.selection&&a.select&&a.select())},selectElementContents:function(a){var c=b.createRange();c.selectNodeContents(a);var d=window.getSelection();d.removeAllRanges(),d.addRange(c)},fullScreen:function(a){a.addClass("full-screen")}}},a.fn.editIt=a.editIt.init;var c=function(){var a=b.querySelectorAll("script[src]"),c=a[a.length-1].src,d=c.split("/"),e=d[d.length-1],f=c.replace(e,"").replace("inc/","");return f};a.editIt.defaults.path=c()+"inc/",a.editIt.plugins.path=c()+"plug-ins/",a.editIt.i18n.loadfile(a.editIt.defaults)}(jQuery,document),$.fn.unselectable=function(){return this.each(function(){$(this).css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).attr("unselectable","on")})},$.fn.selectable=function(){return this.each(function(){$(this).css({"-moz-user-select":"text","-webkit-user-select":"text","user-select":"text"}).removeAttr("unselectable")})},String.prototype.asId=function(){return this.replace(/[^a-zA-Z0-9_]+/g,"")},!function(a){function b(a,b,c,d){if(a.tag.format&&c.length>0){c.push("\n");for(var e=0;d>e;e++)c.push("	")}}function c(d,e){var f=[],g=0==d.attributes.length,h=0;if(d.tag.isComment)e.allowComments&&(f.push("<!--"),f.push(d.tag.rawAttributes),f.push(">"),e.format&&b(d,e,f,h-1));else{var i=d.tag.render&&(0==e.allowedTags.length||a.inArray(d.tag.name,e.allowedTags)>-1)&&(0==e.removeTags.length||-1==a.inArray(d.tag.name,e.removeTags));if(!d.isRoot&&i&&(f.push("<"),f.push(d.tag.name),a.each(d.attributes,function(){if(-1==a.inArray(this.name,e.removeAttrs)){var b=RegExp(/^(['"]?)(.*?)['"]?$/).exec(this.value),c=b[2],g=b[1]||"'";"class"==this.name&&e.allowedClasses.length>0&&(c=a.grep(c.split(" "),function(b){return a.grep(e.allowedClasses,function(c){return c==b||c[0]==b&&(1==c.length||a.inArray(d.tag.name,c[1])>-1)}).length>0}).join(" ")),null!=c&&(c.length>0||a.inArray(this.name,d.tag.requiredAttributes)>-1)&&(f.push(" "),f.push(this.name),f.push("="),f.push(g),f.push(c),f.push(g))}})),d.tag.isSelfClosing)i&&f.push(" />"),g=!1;else if(d.tag.isNonClosing)g=!1;else{if(!d.isRoot&&i&&f.push(">"),h=e.formatIndent++,d.tag.toProtect)n=a.htmlClean.trim(d.children.join("")).replace(/<br>/gi,"\n"),f.push(n),g=0==n.length;else{for(var n=[],p=0;p<d.children.length;p++){var q=d.children[p],r=a.htmlClean.trim(o(l(q)?q:q.childrenToString()));m(q)&&p>0&&r.length>0&&(j(q)||k(d.children[p-1]))&&n.push(" "),l(q)?r.length>0&&n.push(r):(p!=d.children.length-1||"br"!=q.tag.name)&&(e.format&&b(q,e,n,h),n=n.concat(c(q,e)))}e.formatIndent--,n.length>0&&(e.format&&"\n"!=n[0]&&b(d,e,f,h),f=f.concat(n),g=!1)}!d.isRoot&&i&&(e.format&&b(d,e,f,h-1),f.push("</"),f.push(d.tag.name),f.push(">"))}if(!d.tag.allowEmpty&&g)return[]}return f}function d(b,c){return f(b,function(b){return a.inArray(b.tag.nameOriginal,c)>-1})}function e(a){return f(a,function(a){return a.isRoot||!a.tag.isInline})}function f(a,b,c){c=c||1;var d=a[a.length-c];return b(d)?!0:a.length-c>0&&f(a,b,c+1)?(a.pop(),!0):!1}function g(a){return a?(this.tag=a,this.isRoot=!1):(this.tag=new i("root"),this.isRoot=!0),this.attributes=[],this.children=[],this.hasAttribute=function(a){for(var b=0;b<this.attributes.length;b++)if(this.attributes[b].name==a)return!0;return!1},this.childrenToString=function(){return this.children.join("")},this}function h(a,b){return this.name=a,this.value=b,this}function i(b,c,d,e){return this.name=b.toLowerCase(),this.nameOriginal=this.name,this.render=!0,this.init=function(){if("--"==this.name?(this.isComment=!0,this.isSelfClosing=!0,this.format=!0):(this.isComment=!1,
this.isSelfClosing=a.inArray(this.name,v)>-1,this.isNonClosing=a.inArray(this.name,w)>-1,this.isClosing=void 0!=c&&c.length>0,this.isInline=a.inArray(this.name,p)>-1,this.disallowNest=a.inArray(this.name,r)>-1,this.requiredParent=t[a.inArray(this.name,t)+1],this.allowEmpty=e&&a.inArray(this.name,e.allowEmpty)>-1,this.toProtect=a.inArray(this.name,u)>-1,this.format=a.inArray(this.name,q)>-1||!this.isInline),this.rawAttributes=d,this.requiredAttributes=y[a.inArray(this.name,y)+1],e){if(e.tagAttributesCache||(e.tagAttributesCache=[]),-1==a.inArray(this.name,e.tagAttributesCache)){for(var b=x[a.inArray(this.name,x)+1].slice(0),f=0;f<e.allowedAttributes.length;f++){var g=e.allowedAttributes[f][0];(1==e.allowedAttributes[f].length||a.inArray(this.name,e.allowedAttributes[f][1])>-1)&&-1==a.inArray(g,b)&&b.push(g)}e.tagAttributesCache.push(this.name),e.tagAttributesCache.push(b)}this.allowedAttributes=e.tagAttributesCache[a.inArray(this.name,e.tagAttributesCache)+1]}},this.init(),this.rename=function(a){this.name=a,this.init()},this}function j(b){for(;n(b)&&b.children.length>0;)b=b.children[0];if(!l(b))return!1;var c=o(b);return c.length>0&&a.htmlClean.isWhitespace(c.charAt(0))}function k(b){for(;n(b)&&b.children.length>0;)b=b.children[b.children.length-1];if(!l(b))return!1;var c=o(b);return c.length>0&&a.htmlClean.isWhitespace(c.charAt(c.length-1))}function l(a){return a.constructor==String}function m(a){return l(a)||a.tag.isInline}function n(a){return a.constructor==g}function o(a){return a.replace(/&nbsp;|\n/g," ").replace(/\s\s+/g," ")}a.fn.htmlClean=function(b){return this.each(function(){this.value?this.value=a.htmlClean(this.value,b):this.innerHTML=a.htmlClean(this.innerHTML,b)})},a.htmlClean=function(b,f){f=a.extend({},a.htmlClean.defaults,f),f.allowEmpty=s.concat(f.allowEmpty);var j,k=/(<(\/)?(\w+:)?([\w]+)([^>]*)>)|<!--(.*?--)>/gi,m=/([\w\-]+)\s*=\s*(".*?"|'.*?'|[^\s>\/]*)/gi,n=new g,o=[n],p=n;f.bodyOnly&&(j=/<body[^>]*>((\n|.)*)<\/body>/i.exec(b))&&(b=j[1]),b=b.concat("<xxx>");for(var q;j=k.exec(b);){var r=j[6]?new i("--",null,j[6],f):new i(j[4],j[2],j[5],f),t=b.substring(q,j.index);if(t.length>0){var u=p.children[p.children.length-1];p.children.length>0&&l(u=p.children[p.children.length-1])?p.children[p.children.length-1]=u.concat(t):p.children.push(t)}if(q=k.lastIndex,r.isClosing)d(o,[r.name])&&(o.pop(),p=o[o.length-1]);else{for(var v,w=new g(r);v=m.exec(r.rawAttributes);){if("style"==v[1].toLowerCase()&&f.replaceStyles)for(var x=!r.isInline,y=0;y<f.replaceStyles.length;y++)f.replaceStyles[y][0].test(v[2])&&(x||(r.render=!1,x=!0),p.children.push(w),o.push(w),p=w,r=new i(f.replaceStyles[y][1],"","",f),w=new g(r));null!=r.allowedAttributes&&(0==r.allowedAttributes.length||a.inArray(v[1],r.allowedAttributes)>-1)&&w.attributes.push(new h(v[1],v[2]))}a.each(r.requiredAttributes,function(){var a=this.toString();w.hasAttribute(a)||w.attributes.push(new h(a,""))});for(var z=0;z<f.replace.length;z++)for(var A=0;A<f.replace[z][0].length;A++){var B="string"==typeof f.replace[z][0][A];if(B&&f.replace[z][0][A]==r.name||!B&&f.replace[z][0][A].test(j)){r.rename(f.replace[z][1]),z=f.replace.length;break}}var C=!0;if(p.isRoot||(p.tag.isInline&&!r.isInline?(C=e(o))&&(p=o[o.length-1]):p.tag.disallowNest&&r.disallowNest&&!r.requiredParent?C=!1:r.requiredParent&&(C=d(o,r.requiredParent))&&(p=o[o.length-1])),C)if(p.children.push(w),r.toProtect)for(var D;D=k.exec(b);){var E=new i(D[4],D[1],D[5],f);if(E.isClosing&&E.name==r.name){w.children.push(RegExp.leftContext.substring(q)),q=k.lastIndex;break}}else r.isSelfClosing||r.isNonClosing||(o.push(w),p=w)}}return a.htmlClean.trim(c(n,f).join(""))},a.htmlClean.defaults={bodyOnly:!0,allowedTags:[],removeTags:["basefont","center","dir","font","frame","frameset","iframe","isindex","menu","noframes","s","strike","u"],allowedAttributes:[],removeAttrs:["width","height","style"],allowedClasses:[],format:!1,formatIndent:0,replace:[[["b","big"],"strong"],[["i"],"em"]],replaceStyles:[[/font-weight:\s*bold/i,"strong"],[/font-style:\s*italic/i,"em"],[/vertical-align:\s*super/i,"sup"],[/vertical-align:\s*sub/i,"sub"]],allowComments:!1,allowEmpty:[]},a.htmlClean.trim=function(b){return a.htmlClean.trimStart(a.htmlClean.trimEnd(b))},a.htmlClean.trimStart=function(b){return b.substring(a.htmlClean.trimStartIndex(b))},a.htmlClean.trimStartIndex=function(b){for(var c=0;c<b.length-1&&a.htmlClean.isWhitespace(b.charAt(c));c++);return c},a.htmlClean.trimEnd=function(b){return b.substring(0,a.htmlClean.trimEndIndex(b))},a.htmlClean.trimEndIndex=function(b){for(var c=b.length-1;c>=0&&a.htmlClean.isWhitespace(b.charAt(c));c--);return c+1},a.htmlClean.isWhitespace=function(b){return-1!=a.inArray(b,z)};var p=["a","abbr","acronym","address","b","big","br","button","caption","cite","code","del","em","font","hr","i","input","img","ins","label","legend","map","q","s","samp","select","option","param","small","span","strike","strong","sub","sup","tt","u","var"],q=["address","button","caption","code","input","label","legend","select","option","param"],r=["h1","h2","h3","h4","h5","h6","p","th","td","object"],s=["th","td"],t=[null,"li",["ul","ol"],"dt",["dl"],"dd",["dl"],"td",["tr"],"th",["tr"],"tr",["table","thead","tbody","tfoot"],"thead",["table"],"tbody",["table"],"tfoot",["table"],"param",["object"]],u=[],v=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],w=["!doctype","?xml"],x=["?xml",[],"!doctype",[],"a",["accesskey","class","href","name","title","rel","rev","type","tabindex"],"abbr",["class","title"],"acronym",["class","title"],"blockquote",["cite","class"],"button",["class","disabled","name","type","value"],"del",["cite","class","datetime"],"form",["accept","action","class","enctype","method","name"],"iframe",["class","height","name","sandbox","seamless","src","srcdoc","width"],"input",["accept","accesskey","alt","checked","class","disabled","ismap","maxlength","name","size","readonly","src","tabindex","type","usemap","value","multiple"],"img",["alt","class","height","src","width"],"ins",["cite","class","datetime"],"label",["accesskey","class","for"],"legend",["accesskey","class"],"link",["href","rel","type"],"meta",["content","http-equiv","name","scheme","charset"],"map",["name"],"optgroup",["class","disabled","label"],"option",["class","disabled","label","selected","value"],"q",["class","cite"],"script",["src","type"],"select",["class","disabled","multiple","name","size","tabindex"],"table",["class","summary"],"th",["class","colspan","rowspan"],"td",["class","colspan","rowspan"],"textarea",["accesskey","class","cols","disabled","name","readonly","rows","tabindex"],"param",["name","value"],"embed",["height","src","type","width"]],y=[[],"img",["alt"]],z=[" "," ","	","\n","\r","\f"]}(jQuery);var nAgt=navigator.userAgent;if(!jQuery.browser){jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.safari=!1,jQuery.browser.chrome=!1,jQuery.browser.msie=!1,jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10);var nameOffset,verOffset,ix;if(-1!=(verOffset=nAgt.indexOf("Opera")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8));else if(-1!=(verOffset=nAgt.indexOf("OPR")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+4);else if(-1!=(verOffset=nAgt.indexOf("MSIE")))jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5);else if(-1!=nAgt.indexOf("Trident")){jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer";var start=nAgt.indexOf("rv:")+3,end=start+4;jQuery.browser.fullVersion=nAgt.substring(start,end)}else-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.chrome=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName));-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion}jQuery.browser.android=/Android/i.test(nAgt),jQuery.browser.blackberry=/BlackBerry|BB|PlayBook/i.test(nAgt),jQuery.browser.ios=/iPhone|iPad|iPod|webOS/i.test(nAgt),jQuery.browser.operaMobile=/Opera Mini/i.test(nAgt),jQuery.browser.windowsMobile=/IEMobile|Windows Phone/i.test(nAgt),jQuery.browser.kindle=/Kindle|Silk/i.test(nAgt),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackberry||jQuery.browser.ios||jQuery.browser.windowsMobile||jQuery.browser.operaMobile||jQuery.browser.kindle,jQuery.isMobile=jQuery.browser.mobile,jQuery.isTablet=jQuery.browser.mobile&&jQuery(window).width()>765,jQuery.isAndroidDefault=jQuery.browser.android&&!/chrome/i.test(nAgt);
//# sourceMappingURL=jquery.mb.editIt.min.js.map