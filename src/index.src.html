<!DOCTYPE html>
<!--–––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––
  jquery.mb.components                                                                                                                              –
                                                                                                                                                    –
  file: index.html                                                                                                                                  –
  last modified: 03/09/15 17.04                                                                                                                     –
                                                                                                                                                    –
  Open Lab s.r.l., Florence - Italy                                                                                                                 –
                                                                                                                                                    –
  email: matteo@open-lab.com                                                                                                                        –
  site: http://pupunzi.com                                                                                                                          –
        http://open-lab.com                                                                                                                         –
  blog: http://pupunzi.open-lab.com                                                                                                                 –
  Q&A:  http://jquery.pupunzi.com                                                                                                                   –
                                                                                                                                                    –
  Licences: MIT, GPL                                                                                                                                –
     http://www.opensource.org/licenses/mit-license.php                                                                                             –
     http://www.gnu.org/licenses/gpl.html                                                                                                           –
                                                                                                                                                    –
  Copyright (c) 2001-2015. Matteo Bicocchi (Pupunzi);                                                                                               –
  –––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––––-->

<html>
<head>
    <meta charset="UTF-8"/>
    <title>editIt</title>

    <link rel="stylesheet" type="text/css" href="demo.css">
    <link rel="stylesheet" type="text/css" href="../css/editIt.min.css">

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="../inc/jquery.mb.editIt.js"></script>

</head>
<body>
<img id="gitHub" src="http://0xc0.de/img/c/ForkMeOnGitHub.png">
<div id="wrapper">
    <h1>editIt <span class="editIt-icon-i-cursor blink" ></span></h1>
    <h2>Smart and light <b>WYSIWYG HTML editor</b> for your contents.</h2>
    <button id="enableEditIt" onclick="$('#schedaPlaceHolder').editIt(); $('#disableEditIt').show(); $(this).hide()">Enable editIt</button>
    <button id="disableEditIt" onclick="saveIt('scheda1'); $('#enableEditIt').show(); $(this).hide()" style="display: none" >Disable editIt</button>

    <textarea id="editIt-textarea" name="editIt-textarea"></textarea>
    <div id="schedaPlaceHolder" data-for="editIt-textarea" ></div>

</div>
<script>

    $(function(){
        loadFile('demoContent.html')
    });

    /**
     *
     * */

    function loadFile(url){
        $.ajax({
            type: "POST",
            url: url,
            data: {},
            dataType:"html",
            success: function(html){
                var $schedaPlaceHolder = $("#schedaPlaceHolder");
                $schedaPlaceHolder.html(html);

                /**
                 * Initialize the editIt behavior
                 */

                /*
                 $.editIt.plugins.load("../plug-ins/iconFonts");
                 $.editIt.toolBar.extend("default", "|",1000);
                 $.editIt.toolBar.extend("default", "iconfont",1000);
                 */

                $.editIt.plugins.load("../plug-ins/tableManager");

                $.editIt.plugins.load("../plug-ins/variablesReplace");
                $.editIt.toolBar.extend("default", "|",1000);
                $.editIt.toolBar.extend("default", "variablesReplace",1000);

                $.editIt.plugins.load("../plug-ins/modulesManager");

                $schedaPlaceHolder.editIt({textareaId: "editIt-textarea"});
                $.editIt.util.setUneditable( $schedaPlaceHolder );
            }
        });
    }

    function removebeforeSaving (arr) {
        if(arr)
            for (var el in arr) {
                var elToRemove = arr[el];
                $(elToRemove).remove();
            }
    }

    function saveIt(name){

        console.debug( "saveIt" );
        var container = $("#schedaPlaceHolder");
        console.debug($.editIt.util.getContent(container));
        $.editIt.util.setUneditable(container);

    }


</script>

<a style="position: fixed;bottom:40px;right: 30px;" href="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=V6ZS8JPMZC446&lc=GB&item_name=mb%2eideas&item_number=MBIDEAS&currency_code=EUR&bn=PP%2dDonationsBF%3abtn_donateCC_LG_global%2egif%3aNonHosted">
    <img border="0" alt="PayPal" src="https://www.paypal.com/en_US/i/btn/btn_donateCC_LG_global.gif" class="alignright">
</a>

<!-- Hidden variables for the "variablesReplace plug-in-->
<input type="hidden" name="variabile-1" data-content-replace="true" value="Testo della variabile 1">
<input type="hidden" name="variabile-2" data-content-replace="true" value="Testo della variabile 2">


</body>
</html>
